# 介绍

`gic`库有几个核心模块，分别是`布局系统`、`数据绑定`、`行为`、`动画`、`指令`、`模板`，你可能觉得为什么`UI`不是核心模块，那是因为`gic`库拥有高度的课自定义能力，因此`UI`纯粹是基于核心模块扩展出来的一个独立模块，而这个模块对于其他开发者来说，完全可以自己扩展出一个属于自己的UI库，因此在`gic`里面UI并不是核心。而事实上布局系统其实也算是一种UI，因为都是从`Texture`库的`ASDisplayNode`继承而来，因此`布局系统`也是一种UI。而其他的模块就统一称为`非UI`模块。



## 布局系统

`布局系统`顾名思义，就是用来实现布局的，而`gic`的布局系统其实是基于`Texture`而开发的，因此`gic`做了进一步的封装，使得使用起来更加的方便。在实际的开发中，可以通过不同的布局panel组合，可以实现很多复杂的布局，其中`stack-panel`更是支持完整的`flex`布局。



## 数据绑定

`gic`里面的数据绑定的实现参考了`Vue`、`WPF`,虽然所有的`element`都支持单独设定数据源，但是如果没有设置的话，自动继承父级的数据源，如果父级的也没有直接设置，那么层层查找，直到找到为止，而当数据源的数据有更新的话，会自动将该数据源对应的`element`以及所有的子孙`element`绑定了该数据源的地方一并更新，如果更新的时候涉及到UI的变动，那么`gic`会自动将改动反应到UI上面。更新的时候有可能会涉及到多个地方的UI变动，但是得益于iOS本身的渲染机制，这些改动并不会触发多次的display，而是会等待下一帧的时候一并display出来。因此这里面大可不必担心性能问题。这一点不像在h5中需要采用`脏检测`等手段才能避免引起性能问题。**数据绑定也支持简单js表达式。**



## 行为

`行为`这个功能对应`gic`中的`behaviors`，这个概念其实也是从`WPF`中借鉴过来的。`行为`其实更像是一种组件，但是跟组件有本质的不同，`behavior`可以理解为对于一个本身不具备某个功能的元素，通过`behavior`的方式将某个功能附加上去，使得这个元素具备某个行为能力。而在`gic`整个库中，`behavior`是作为一中绝对核心的功能支撑着其他的功能的实现，比如:`动画`、`指令`等一些功能其实都是通过`behavior`来实现的。而对于其他开发者来说，你可以通过`behavior`的形式，对元素进行任何扩展。举个例子：

`UITableView`本身并不具备下来刷新、上啦加载更多的功能，但是通过`behavior`可以很轻易的对`UITableView`添加这些功能。

事实上很多功能你都可以通过`behavior`的方式附加到元素上，这样的方式也降低了各个模块的依赖度，使得在实际的架构设计的时候可以更加的灵活。

`behavior`对于一些没有接触过这种概念的同学可能一开始有点一头雾水，但是在实际的开发中理解了`behavior`的妙用，相信我，你会爱上它的。



## 动画

在`gic`中，现在`动画`也可以直接通过XML来写了，`动画`本身是从`behavior`继承过来的，因此可以附加到任何元素上。事实上在`gic`中，`动画`这个功能是贯彻整个库而存在的，理论上所有的属性都支持动画，比如:背景色啊、透明度啊、缩放、位移等等动画，你可以直接通过为元素添加一个`animations`节点来创建动画。也支持对同一个元素同时添加不同的动画，甚至不同的动画支持各自控制动画时间。





## 指令

`指令`这个功能参考了H5中`angularjs`的功能，但是语法却跟`angularjs`是不一样的。指令在`gic`中的实现其实也是`behavior`的一种，目前`gic`库支持两种指令，分别是`for`和`if`，目前这两个指令主要是集中在动态的控制元素的创建和删除等操作。当然你也可以扩展出自己的指令，比如`switch`指令。



##  模板

`模板`的实现也是参考了h5中的`template`功能，目前你可以在一个任何元素下面添加`模板`，使得该元素自己所有的子孙元素可以访问到该模板，模板功能主要是为页面中有些可能具有类似布局的地方可以共用一个模板，使得在写xml的时候，直接将某些元素模块化。比如：`gic`本身并不提供`button`这样的元素，但是你可以通过`模板`的功能，直接在模板中创建一个button的布局，然后给该`button`添加上动画、事件，这样一个button就成了，在页面中任何你想要该button的地方直接引用就行。

`模板`也支持`嵌套`模板、`占位模板(参考了vue中的component)`。



## UI元素

最后再说说`UI元素`,这里说的`UI元素`泛指`button`、`lable`、`searchbar`、`input`等等具有一定功能的元素，在`gic`中`panel`其实也算是UI元素，但是`panel`算是一种特殊的UI，是负责布局的UI。`gic`本身自带的UI元素其实很有限，只有`lable`、`image`、`list`、`input`等少数几个常用的UI，你会发现连`button`都没有,而其他的UI并没有包含。一来UI元素太多，`gic`不可能将所有的UI都封装进去，二来`gic`本身提供了强大的自定义能力，你可以自己根据实际的需求自定义UI元素，只需要按照协议实现少数几个方法就能实现自定义UI元素，具体如何自定义可以参考自定义一节内容。另外，由于有了`behavior`、`模板 `的引入，有些功能你无需自定义UI元素也能实现同样的功能。





## 最后

总的来说，`gic`库在实现的时候参考了好几种语言、技术，尽量将不同的语言、技术中的优点整合进来，使得可以极大的提升开发效率，而上手也比较容易。

由于`gic`是由XML来写UI的，因此天生就支持远程更新UI，`gic`的开发初衷，并不是完全的拥有`hot patch`能力，因此仅限于UI层面的远程更新，而业务逻辑暂时不支持远程更新。

`gic`还有一个特点是支持局部替换。比如：在已经开发好的项目中，如果要引入`gic`库，那么你可以用gic局部替换项目中任意的UI，无需整个项目、整个页面的替换。这样也就可以最小代价对现有项目进行改造。